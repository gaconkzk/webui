<link rel="import" href="./bower_components/polymer/polymer.html">
<link rel="import" href="./bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="./bower_components/paper-button/paper-button.html">
<link rel="import" href="./bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="./bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="./bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="./bower_components/app-layout/app-layout.html">
<link rel="import" href="./bower_components/iron-icons/iron-icons.html">
<link rel="import" href="./bower_components/iron-icon/iron-icon.html">

<dom-module id="the-flies">
    <template>
        <iron-ajax id="dataService" url="/greeting" on-response="updateData"></iron-ajax>
        <app-toolbar>
            <div main-title>The Flies</div>
            <paper-icon-button icon="menu" on-tap="toggleDrawer"></paper-icon-button>
        </app-toolbar>

        <div class="fit">
            <h1>Greeting</h1>
            <div>
                <p>The ID is [[greeting.id]]</p>
                <p>The content is [[greeting.content]]</p>

                <paper-button on-click="getData">Get Server Data</paper-button>
            </div>
        </div>

        <app-drawer id="drawer" align="right" opened>
            <div class="drawer-contents">
                <template is="dom-repeat" id="menu" items="[[items]]">
                    <paper-icon-item>
                        <iron-icon icon="[[item]]" item-con></iron-icon>
                        <span>[[item]]</span>
                    </paper-icon-item>
                </template>
            </div>
        </app-drawer>
        <!---->
        <!--<paper-header-panel class="flex">-->
            <!--<paper-toolbar>-->
                <!--<paper-icon-button src="/images/logo.png"></paper-icon-button>-->
                <!--<span class="title">The Flies</span>-->
                <!--<paper-icon-button icon="menu"></paper-icon-button>-->
            <!--</paper-toolbar>-->
        <!--</paper-header-panel>-->
    </template>
    <script>
        Polymer({
             is: "the-flies",
             properties: {
                greeting: {
                    type: Object,
                    value: {
                        "id": "ahihi",
                        "content": "welcome to my first training session"
                    }
                },
                items: {
                    type: Array,
                    value: ['inbox','favorite','polymer']
                }
             },

             getData: function() {
                this.$.dataService.generateRequest();
             },
             updateData: function(evt) {
                this.greeting = evt.detail.response;
             },
             toggleDrawer: function() {
                this.$.drawer.toggle();
             }
        });
    </script>
</dom-module>