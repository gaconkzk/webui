<link rel="import" href="./bower_components/polymer/polymer.html">
<link rel="import" href="./bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="./bower_components/paper-button/paper-button.html">

<dom-module id="the-flies">
    <style>
        div.bubble {
            margin: 20px;
            padding: 20px 20px;
            border-radius: 20px;
            background-color: #f1f1f1;
        }
    </style>

    <template>
        <iron-ajax id="dataService" url="/greeting" on-response="updateData"></iron-ajax>
        <div class="bubble">
            <h1>Greeting</h1>
            <div>
                <p>The ID is [[greeting.id]]</p>
                <p>The content is [[greeting.content]]</p>

                <paper-button on-click="getData">Get Server Data</paper-button>
            </div>
        </div>
    </template>
    <script>
        Polymer({
             is: "the-flies",
             properties: {
                greeting: {
                    type: Object,
                    value: {
                        "id": "ahihi",
                        "content": "welcome to my first training session"
                    }
                }
             },

             getData: function() {
                this.$.dataService.generateRequest();
             },
             updateData: function(evt) {
                this.greeting = evt.detail.response;
             }
        });
    </script>
</dom-module>